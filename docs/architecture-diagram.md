# AutoRFP Architecture Diagram

## High-Level Architecture

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                                    AutoRFP Platform                                      │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│  ┌──────────────┐     ┌──────────────────┐     ┌─────────────────────────────────────┐  │
│  │   Next.js    │     │  Amazon Cognito  │     │         Amazon API Gateway          │  │
│  │   Frontend   │────▶│   User Pool      │────▶│          REST API                   │  │
│  │  (Amplify)   │     │ (Advanced Sec.)  │     │    16 Resource Domains              │  │
│  └──────────────┘     └──────────────────┘     └──────────────┬──────────────────────┘  │
│                                                                │                         │
│                                                                ▼                         │
│  ┌─────────────────────────────────────────────────────────────────────────────────────┐│
│  │                            AWS Lambda Functions (~75)                                ││
│  │  ┌───────────┐ ┌───────────┐ ┌───────────┐ ┌───────────┐ ┌───────────┐             ││
│  │  │   Org     │ │  Project  │ │  Document │ │   User    │ │  Question │             ││
│  │  │  CRUD     │ │   CRUD    │ │   CRUD    │ │   CRUD    │ │   CRUD    │             ││
│  │  └───────────┘ └───────────┘ └───────────┘ └───────────┘ └───────────┘             ││
│  │  ┌───────────┐ ┌───────────┐ ┌───────────┐ ┌───────────┐ ┌───────────┐             ││
│  │  │  Answer   │ │ Proposal  │ │   Brief   │ │  SAM.gov  │ │ Semantic  │             ││
│  │  │Generation │ │Generation │ │Generation │ │Integration│ │  Search   │             ││
│  │  └───────────┘ └───────────┘ └───────────┘ └───────────┘ └───────────┘             ││
│  └─────────────────────────────────────────────────────────────────────────────────────┘│
│                                          │                                               │
│                    ┌─────────────────────┼─────────────────────┐                        │
│                    │                     │                     │                        │
│                    ▼                     ▼                     ▼                        │
│  ┌────────────────────────┐ ┌───────────────────┐ ┌────────────────────────┐           │
│  │    Amazon DynamoDB     │ │    Amazon S3      │ │ OpenSearch Serverless  │           │
│  │   (Single-Table)       │ │ (Documents Bucket)│ │  (Vector Search)       │           │
│  │                        │ │                   │ │                        │           │
│  │  • Organizations       │ │  • RFP Documents  │ │  • Document Embeddings │           │
│  │  • Projects            │ │  • Knowledge Base │ │  • Semantic Search     │           │
│  │  • Documents           │ │  • Text Chunks    │ │  • RAG Retrieval       │           │
│  │  • Questions           │ │  • Proposals      │ │                        │           │
│  │  • Answers             │ │                   │ │                        │           │
│  │  • Briefs              │ │                   │ │                        │           │
│  └────────────────────────┘ └───────────────────┘ └────────────────────────┘           │
│                                                                                          │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```

---

## Document Processing Pipeline

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                         Document Processing Pipeline (Step Functions)                    │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│   ┌──────────┐      ┌──────────────┐      ┌─────────────────────────────────────────┐   │
│   │  Upload  │      │  Amazon S3   │      │            Route by File Type            │   │
│   │ Document │─────▶│   Storage    │─────▶│                                          │   │
│   └──────────┘      └──────────────┘      └───────────────────┬──────────────────────┘   │
│                                                                │                         │
│                              ┌─────────────────────────────────┼─────────────────┐       │
│                              │                                 │                 │       │
│                              ▼                                 ▼                 ▼       │
│                    ┌─────────────────┐             ┌─────────────────┐   ┌──────────┐   │
│                    │   PDF/Image     │             │      DOCX       │   │   Other  │   │
│                    │   Processing    │             │   Processing    │   │  (Fail)  │   │
│                    └────────┬────────┘             └────────┬────────┘   └──────────┘   │
│                             │                               │                           │
│                             ▼                               ▼                           │
│                    ┌─────────────────┐             ┌─────────────────┐                  │
│                    │ Amazon Textract │             │   Extract Text  │                  │
│                    │  (Async OCR)    │             │    (mammoth)    │                  │
│                    └────────┬────────┘             └────────┬────────┘                  │
│                             │                               │                           │
│                             └───────────────┬───────────────┘                           │
│                                             │                                           │
│                                             ▼                                           │
│                                    ┌─────────────────┐                                  │
│                                    │  Chunk Document │                                  │
│                                    │  (2500 chars,   │                                  │
│                                    │   250 overlap)  │                                  │
│                                    └────────┬────────┘                                  │
│                                             │                                           │
│                                             ▼                                           │
│                                    ┌─────────────────┐                                  │
│                                    │ Generate Vector │                                  │
│                                    │   Embeddings    │                                  │
│                                    │  (Titan V2)     │                                  │
│                                    └────────┬────────┘                                  │
│                                             │                                           │
│                                             ▼                                           │
│                                    ┌─────────────────┐                                  │
│                                    │ Index to        │                                  │
│                                    │ OpenSearch      │                                  │
│                                    │ Serverless      │                                  │
│                                    └─────────────────┘                                  │
│                                                                                          │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```

---

## Question Extraction Pipeline

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                       Question Extraction Pipeline (Step Functions)                      │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│   ┌──────────┐      ┌──────────────┐      ┌─────────────────────────────────────────┐   │
│   │  Upload  │      │  Amazon S3   │      │            Route by File Type            │   │
│   │RFP/SOW   │─────▶│   Storage    │─────▶│                                          │   │
│   └──────────┘      └──────────────┘      └───────────────────┬──────────────────────┘   │
│                                                                │                         │
│                              ┌─────────────────────────────────┼─────────────────┐       │
│                              │                                 │                 │       │
│                              ▼                                 ▼                 ▼       │
│                    ┌─────────────────┐             ┌─────────────────┐   ┌──────────┐   │
│                    │   PDF/Image     │             │      DOCX       │   │   Other  │   │
│                    │   Processing    │             │   Processing    │   │  (Fail)  │   │
│                    └────────┬────────┘             └────────┬────────┘   └──────────┘   │
│                             │                               │                           │
│                             ▼                               │                           │
│                    ┌─────────────────┐                      │                           │
│                    │ Amazon Textract │                      │                           │
│                    │  (Async + SNS)  │                      │                           │
│                    └────────┬────────┘                      │                           │
│                             │                               │                           │
│                             ▼                               │                           │
│                    ┌─────────────────┐                      │                           │
│                    │  Process Result │                      │                           │
│                    │  (Get Text)     │◀─────────────────────┘                           │
│                    └────────┬────────┘                                                  │
│                             │                                                           │
│                             ▼                                                           │
│                    ┌─────────────────┐                                                  │
│                    │     Fulfill     │                                                  │
│                    │  Opportunity    │                                                  │
│                    │    Fields       │                                                  │
│                    │ (Claude Haiku)  │                                                  │
│                    └────────┬────────┘                                                  │
│                             │                                                           │
│                             ▼                                                           │
│                    ┌─────────────────┐                                                  │
│                    │    Extract      │                                                  │
│                    │   Questions     │                                                  │
│                    │ (Claude Haiku)  │                                                  │
│                    └────────┬────────┘                                                  │
│                             │                                                           │
│                             ▼                                                           │
│                    ┌─────────────────┐                                                  │
│                    │  Save to        │                                                  │
│                    │  DynamoDB       │                                                  │
│                    └─────────────────┘                                                  │
│                                                                                          │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```

---

## RAG Answer Generation Flow

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                            RAG Answer Generation Flow                                    │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│   ┌──────────────┐                                                                       │
│   │   Question   │                                                                       │
│   │   from RFP   │                                                                       │
│   └──────┬───────┘                                                                       │
│          │                                                                               │
│          ▼                                                                               │
│   ┌──────────────────────────────────────┐                                              │
│   │      Generate Query Embedding        │                                              │
│   │      (Amazon Titan Embed V2)         │                                              │
│   └──────────────┬───────────────────────┘                                              │
│                  │                                                                       │
│                  ▼                                                                       │
│   ┌──────────────────────────────────────┐      ┌────────────────────────────────┐      │
│   │     Semantic Search (KNN)            │─────▶│   OpenSearch Serverless        │      │
│   │     Top-K Similar Chunks             │      │   Vector Index                 │      │
│   └──────────────┬───────────────────────┘      └────────────────────────────────┘      │
│                  │                                                                       │
│                  ▼                                                                       │
│   ┌──────────────────────────────────────┐                                              │
│   │     Retrieve Context Chunks          │                                              │
│   │     (From Knowledge Base)            │                                              │
│   └──────────────┬───────────────────────┘                                              │
│                  │                                                                       │
│                  ▼                                                                       │
│   ┌──────────────────────────────────────┐      ┌────────────────────────────────┐      │
│   │     Generate Answer                  │      │   Amazon Bedrock               │      │
│   │     Question + Context + Prompt      │─────▶│   Claude 3 Haiku               │      │
│   └──────────────┬───────────────────────┘      └────────────────────────────────┘      │
│                  │                                                                       │
│                  ▼                                                                       │
│   ┌──────────────────────────────────────┐                                              │
│   │     Answer with Source Citations     │                                              │
│   │     (Saved to DynamoDB)              │                                              │
│   └──────────────────────────────────────┘                                              │
│                                                                                          │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```

---

## Executive Brief Generation

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                          Executive Brief Generation (SQS Worker)                         │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│   ┌──────────────┐      ┌──────────────┐      ┌──────────────────────────────────────┐  │
│   │  Init Brief  │─────▶│  Amazon SQS  │─────▶│       Exec Brief Worker Lambda       │  │
│   │  (6 jobs)    │      │   Queue      │      │         (Batch size: 5)              │  │
│   └──────────────┘      └──────────────┘      └───────────────────┬──────────────────┘  │
│                                                                    │                     │
│                    ┌──────────────────────────────────────────────┘                     │
│                    │                                                                     │
│          ┌─────────┼─────────┬─────────┬─────────┬─────────┬─────────┐                 │
│          ▼         ▼         ▼         ▼         ▼         ▼         ▼                 │
│     ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐           │
│     │ Summary │ │Deadlines│ │Contacts │ │ Require │ │  Risks  │ │ Scoring │           │
│     │         │ │         │ │         │ │ -ments  │ │         │ │(GO/NO-GO│           │
│     └────┬────┘ └────┬────┘ └────┬────┘ └────┬────┘ └────┬────┘ └────┬────┘           │
│          │           │           │           │           │           │                 │
│          └───────────┴───────────┴───────────┴───────────┴───────────┘                 │
│                                          │                                              │
│                                          ▼                                              │
│                               ┌──────────────────┐                                      │
│                               │  Amazon Bedrock  │                                      │
│                               │  Claude 3 Haiku  │                                      │
│                               │  (Per Section)   │                                      │
│                               └────────┬─────────┘                                      │
│                                        │                                                │
│                                        ▼                                                │
│                               ┌──────────────────┐                                      │
│                               │  Complete Brief  │                                      │
│                               │  in DynamoDB     │                                      │
│                               └──────────────────┘                                      │
│                                                                                          │
│   Note: Scoring section waits for other sections to complete before generating          │
│         GO/NO-GO recommendation                                                         │
│                                                                                          │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```

---

## SAM.gov Integration

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                              SAM.gov Integration                                         │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│                     ┌─────────────────────────────────────────────────────┐             │
│                     │                   SAM.gov API                        │             │
│                     │             (api.sam.gov)                            │             │
│                     └─────────────────────────┬───────────────────────────┘             │
│                                               │                                          │
│                                               │                                          │
│        ┌──────────────────────────────────────┼──────────────────────────────┐          │
│        │                                      │                              │          │
│        ▼                                      ▼                              ▼          │
│   ┌──────────────────┐              ┌──────────────────┐           ┌────────────────┐  │
│   │  Manual Search   │              │  Saved Searches  │           │    Import      │  │
│   │                  │              │  (Hourly via     │           │  Solicitation  │  │
│   │  • By NAICS      │              │   EventBridge)   │           │                │  │
│   │  • By PSC        │              │                  │           │  • Download    │  │
│   │  • By Keywords   │              │  • Auto-import   │           │    Attachments │  │
│   │  • By Date Range │              │  • New opps      │           │  • Start       │  │
│   │  • By Set-aside  │              │  • Notifications │           │    Pipeline    │  │
│   └────────┬─────────┘              └────────┬─────────┘           └───────┬────────┘  │
│            │                                  │                             │           │
│            └──────────────────────────────────┴─────────────────────────────┘           │
│                                               │                                          │
│                                               ▼                                          │
│                               ┌───────────────────────────────┐                         │
│                               │     Create Opportunity        │                         │
│                               │     in Project                │                         │
│                               └───────────────┬───────────────┘                         │
│                                               │                                          │
│                                               ▼                                          │
│                               ┌───────────────────────────────┐                         │
│                               │  Start Question Pipeline      │                         │
│                               │  (Extract RFP Questions)      │                         │
│                               └───────────────────────────────┘                         │
│                                                                                          │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```

---

## Security Architecture

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                              Security Architecture                                       │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│  ┌────────────────────────────────────────────────────────────────────────────────────┐ │
│  │                              Authentication Layer                                   │ │
│  │  ┌─────────────────────────────────────────────────────────────────────────────┐  │ │
│  │  │                       Amazon Cognito User Pool                               │  │ │
│  │  │                                                                              │  │ │
│  │  │  • Advanced Security Mode: ENFORCED                                          │  │ │
│  │  │  • Risk-based adaptive authentication                                        │  │ │
│  │  │  • Password policy: 8+ chars, all character types                            │  │ │
│  │  │  • Custom attributes: orgId, userId, roles                                   │  │ │
│  │  │  • JWT tokens with custom claims                                             │  │ │
│  │  └─────────────────────────────────────────────────────────────────────────────┘  │ │
│  └────────────────────────────────────────────────────────────────────────────────────┘ │
│                                                                                          │
│  ┌────────────────────────────────────────────────────────────────────────────────────┐ │
│  │                              Authorization Layer                                    │ │
│  │  ┌─────────────────────────────────────────────────────────────────────────────┐  │ │
│  │  │                    Role-Based Access Control (RBAC)                          │  │ │
│  │  │                                                                              │  │ │
│  │  │  Roles:                      Permissions:                                    │  │ │
│  │  │  • Owner      ────────────▶  Full access, delete org                         │  │ │
│  │  │  • Admin      ────────────▶  Manage users, all features                      │  │ │
│  │  │  • Editor     ────────────▶  Create/edit content                             │  │ │
│  │  │  • Viewer     ────────────▶  Read-only access                                │  │ │
│  │  │  • Member     ────────────▶  Basic access                                    │  │ │
│  │  └─────────────────────────────────────────────────────────────────────────────┘  │ │
│  └────────────────────────────────────────────────────────────────────────────────────┘ │
│                                                                                          │
│  ┌────────────────────────────────────────────────────────────────────────────────────┐ │
│  │                              Encryption                                             │ │
│  │                                                                                      │ │
│  │  • DynamoDB: AWS-managed encryption at rest                                         │ │
│  │  • S3: Server-side encryption (SSE-S3)                                              │ │
│  │  • OpenSearch Serverless: Encryption enabled                                        │ │
│  │  • Secrets Manager: Encrypted API keys                                              │ │
│  │  • HTTPS: All API traffic encrypted in transit                                      │ │
│  └────────────────────────────────────────────────────────────────────────────────────┘ │
│                                                                                          │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```

---

## AWS Services Summary

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                              AWS Services Summary                                        │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│  AI/ML                          Compute                        Storage                   │
│  ┌─────────────────────┐       ┌─────────────────────┐        ┌─────────────────────┐   │
│  │ Amazon Bedrock      │       │ AWS Lambda          │        │ Amazon S3           │   │
│  │ • Claude 3 Haiku    │       │ • ~75 functions     │        │ • Documents         │   │
│  │ • Titan Embed V2    │       │ • Node.js 20.x      │        │ • 30-day lifecycle  │   │
│  │                     │       │ • 1024MB memory     │        │                     │   │
│  │ Amazon Textract     │       │                     │        │ Amazon DynamoDB     │   │
│  │ • Async OCR         │       │ AWS Step Functions  │        │ • Single-table      │   │
│  │ • PDF/Image         │       │ • 2 pipelines       │        │ • On-demand         │   │
│  └─────────────────────┘       └─────────────────────┘        │ • PITR enabled      │   │
│                                                                │                     │   │
│                                                                │ OpenSearch          │   │
│  Security                       Messaging                      │ Serverless          │   │
│  ┌─────────────────────┐       ┌─────────────────────┐        │ • Vector search     │   │
│  │ Amazon Cognito      │       │ Amazon SQS          │        └─────────────────────┘   │
│  │ • User Pool         │       │ • Brief queue       │                                   │
│  │ • Advanced Security │       │ • Dead letter queue │                                   │
│  │                     │       │                     │                                   │
│  │ AWS Secrets Manager │       │ Amazon SNS          │        Monitoring                 │
│  │ • API keys          │       │ • Textract callback │        ┌─────────────────────┐   │
│  │                     │       │                     │        │ Amazon CloudWatch   │   │
│  │ AWS IAM             │       │ Amazon EventBridge  │        │ • Logs              │   │
│  │ • Lambda roles      │       │ • Hourly scheduler  │        │ • Metrics           │   │
│  └─────────────────────┘       └─────────────────────┘        └─────────────────────┘   │
│                                                                                          │
│  API                                                                                     │
│  ┌─────────────────────────────────────────────────────────────────────────────────┐   │
│  │ Amazon API Gateway                                                               │   │
│  │ • REST API with 16 resource domains                                              │   │
│  │ • Cognito authorizer                                                             │   │
│  │ • CORS enabled                                                                   │   │
│  └─────────────────────────────────────────────────────────────────────────────────┘   │
│                                                                                          │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```

---

## Data Flow Overview

```
┌─────────────────────────────────────────────────────────────────────────────────────────┐
│                              Data Flow Overview                                          │
├─────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                          │
│    User Journey                                                                          │
│    ════════════                                                                          │
│                                                                                          │
│    1. SETUP                                                                              │
│    ┌──────────────────────────────────────────────────────────────────────────────┐     │
│    │ Sign Up → Create Org → Invite Users → Upload Knowledge Base Documents        │     │
│    └──────────────────────────────────────────────────────────────────────────────┘     │
│                                           │                                              │
│                                           ▼                                              │
│    2. DOCUMENT PROCESSING                                                                │
│    ┌──────────────────────────────────────────────────────────────────────────────┐     │
│    │ Documents → Textract/Extract → Chunk → Embed → Index in OpenSearch           │     │
│    └──────────────────────────────────────────────────────────────────────────────┘     │
│                                           │                                              │
│                                           ▼                                              │
│    3. OPPORTUNITY DISCOVERY                                                              │
│    ┌──────────────────────────────────────────────────────────────────────────────┐     │
│    │ Search SAM.gov → Import Solicitation → Create Opportunity → Executive Brief  │     │
│    └──────────────────────────────────────────────────────────────────────────────┘     │
│                                           │                                              │
│                                           ▼                                              │
│    4. RFP PROCESSING                                                                     │
│    ┌──────────────────────────────────────────────────────────────────────────────┐     │
│    │ Upload RFP → Extract Questions → AI Extraction → Organize by Section         │     │
│    └──────────────────────────────────────────────────────────────────────────────┘     │
│                                           │                                              │
│                                           ▼                                              │
│    5. ANSWER GENERATION                                                                  │
│    ┌──────────────────────────────────────────────────────────────────────────────┐     │
│    │ Select Question → RAG Search → Retrieve Context → Generate Answer → Review   │     │
│    └──────────────────────────────────────────────────────────────────────────────┘     │
│                                           │                                              │
│                                           ▼                                              │
│    6. PROPOSAL CREATION                                                                  │
│    ┌──────────────────────────────────────────────────────────────────────────────┐     │
│    │ Select Q&As → Generate Proposal → Review Sections → Export (PDF/DOCX/XLSX)   │     │
│    └──────────────────────────────────────────────────────────────────────────────┘     │
│                                                                                          │
└─────────────────────────────────────────────────────────────────────────────────────────┘
```

---

*Architecture diagram for AWS Partner POC Funding Request*
*Project: AutoRFP*
*Requested Credits: $15,000*
*Application ID: benappl-jziako0zlnbmr4 (Standard POC)*
*Date: January 2026*
